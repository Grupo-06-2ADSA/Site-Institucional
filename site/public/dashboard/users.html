<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | Usuários</title>
  <script src="../js/sessao.js"></script>
  <link rel="shortcut icon" href="img/circle-MindCore-azul.png" type="image/x-icon">
  <link rel="stylesheet" href="users.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="style-responsivo.css">
</head>

<body onload="Usuarios(), validarSessao()">

  <div class="left-sidebar">

    <img class="imgLogo" src="img/logo-MindCore.png" alt="logo">

    <div class="menu">
      <div class="bloco 1">
        <a href="verificarNotebooks.html">
          <img class="imgBloco" src="img/computador.png">
          <p>Parque de Máquinas</p>
        </a>

      </div>
      <div class="bloco 2 aqui">
        <a href="users.html">
          <img class="imgBloco" src="img/adicionar-usuario.png">
          <p>Adicionar Usuário</p>
        </a>
      </div>
      <div class="bloco 3">
        <a href="historico.html">
          <img class="imgBloco" src="img/historia.png">
          <p>Histórico</p>
        </a>
      </div>
      <div class="bloco 4">
        <a href="">
          <img class="imgBloco" src="img/estoque.png">
          <p>Estoque</p>
        </a>
      </div>
    </div>

    <div class="logout" onclick="limparSessao()">
      <img src="img/sair.png">
    </div>
  </div>
  <div class="dados">
    <div class="perfil">
      <div class="turmas">
        <p>Turmas</p>
        <select name="turmas" id="turma">
          <option value="adsA">ADS A</option>
          <option value="adsB">ADS B</option>
          <option value="adsC">ADS C</option>
          <option value="sis">SIS</option>
          <option value="CCO">CCO</option>
        </select>
      </div>

      <div class="usuario">
        <div class="texto">
            <p class="nome" id="nomeUsuario">Olá, </p>
            <p id="tipoUsuario">Administrador</p>
        </div>
        <img src="img/usuario.png">
    </div>
    </div>

    <div class="list" id="list">
      <div class="pesquisar" id="srcUsuario">
        <p>Nome:</p>
        <input id="Pesquisar">
        <button onclick="pesquisarUsuario()">Pesquisar</button>
      </div>
      <div class="list-header">

        <span id="nome-users">Nome</span>
        <span id="papel">Papel</span>
        <span id="status">Status</span>
        <img src="img/add.png">
      </div>
      <div class="list-users" id="listaUsers">
      </div>

      <button onclick="AdicionarUsuario()" class="adicionar">Adicionar</button>

      <div id="modalAdicionar" class="modalUsuario">
        <div class="modal-conteudo">
          <div class="modal-header-usuario">
            <span class="close">&times;</span>
            <div id="header">
              <h2 id="header-title-usuario"></h2>
            </div>
          </div>
          <div class="modal-body-usuario">
            <div class="formulario">
              <div class="campo">
                <span>Nome</span>
                <input type="text">
              </div>
              <div class="campo">
                <span>Email</span>
                <input type="email">
              </div>
              <div class="campo">
                <span>Cargo</span>
                <select name="" id="">
                  <option selected disabled value="">Selecionar</option>
                  <option value="gestor">Gestor</option>
                  <option value="tecnico">Técnico</option>
                </select>
              </div>
              <div class="campo">
                <span>Status</span>
                <select name="" id="">
                  <option selected disabled value="">Selecionar</option>
                  <option value="ativo">Ativo</option>
                  <option value="inativo">Inativo</option>
                </select>
              </div>
              <div class="campo">
                <span>Turno</span>
                <select name="" id="">
                  <option selected disabled value="">Selecionar</option>
                  <option value="manha">Manhã</option>
                  <option value="tarde">Tarde</option>
                  <option value="noite">Noite</option>
                </select>
              </div>
              <div class="botoes">
                <button class="cancelar">Cancelar</button>
                <button class="adicionar-botao">Adicionar</button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>


  </div>



</body>

</html>
<script>
  const jsonLista = [
    {
      nome: "João Silva",
      email: "joao@example.com",
      papel: "Administrador",
      status: "Ativo"
    },
    {
      nome: "Maria Oliveira",
      email: "maria@example.com",
      papel: "Técnico",
      status: "Ativo"
    },
    {
      nome: "Carlos Santos",
      email: "carlos@example.com",
      papel: "Administrador",
      status: "Inativo"
    },
    {
      nome: "Ana Costa",
      email: "ana@example.com",
      papel: "Técnico",
      status: "Ativo"
    },
    {
      nome: "Pedro Sousa",
      email: "pedro@example.com",
      papel: "Técnico",
      status: "Inativo"
    },
    {
      nome: "Luísa Fernandes",
      email: "luisa@example.com",
      papel: "Administrador",
      status: "Ativo"
    },
    {
      nome: "Marta Almeida",
      email: "marta@example.com",
      papel: "Técnico",
      status: "Inativo"
    },
    {
      nome: "Rui Gonçalves",
      email: "rui@example.com",
      papel: "Administrador",
      status: "Ativo"
    },
    {
      nome: "Sofia Rodrigues",
      email: "sofia@example.com",
      papel: "Técnico",
      status: "Ativo"
    },
    {
      nome: "Paulo Costa",
      email: "paulo@example.com",
      papel: "Técnico",
      status: "Inativo"
    }
  ];

  function Usuarios() {
    for (var i = 0; i < jsonLista.length; i++) {
      listaUsers.innerHTML += `
        <div class="user" id="0${i}">
            <div class="email">
                <span id="name">${jsonLista[i].nome}</span>
                <span id="mail">${jsonLista[i].email}</span>
            </div>
            <div class="papel">
                <span>${jsonLista[i].papel}</span>
            </div>
            <div class="status">
                <span id="status${i}">${jsonLista[i].status}</span>
    
            </div>
            <div class="edit">
              <a href=""><span>Editar</span></a>
                
    
            </div>
    
        </div>
        `
      if (jsonLista[i].status == "Inativo") {
        const elemento = document.getElementById('status' + i);
        elemento.setAttribute("style", "background-color: red;");
      }
      if (i >= 7) {
        listaUsers.style.overflowY = "scroll";
        list.style.overflow = "hidden";
      }
    }


  }

  function pesquisarUsuario() {
    let usuarioPesquisa = Pesquisar.value;

    for (let i = 0; i <= jsonLista.length; i++) {
      if (usuarioPesquisa == jsonLista[i].nome) {
        //graficos(usuarioPesquisa);
        listaUsers.innerHTML = `<div class="user" id="0${i}">
        <div class="email">
            <span id="name">${jsonLista[i].nome}</span>
            <span id="mail">${jsonLista[i].email}</span>
        </div>
        <div class="papel">
            <span>${jsonLista[i].papel}</span>
        </div>
        <div class="status">
            <span id="status${i}">${jsonLista[i].status}</span>

        </div>
        <div class="edit">
          <a href=""><span>Editar</span></a>
        </div>

        </div>`

        srcUsuario.innerHTML += `<span id="limpar" onclick="LimparPesquisa()">Limpar</span>`;

        break;
      } else {
        Usuarios();
      }
    }
  }

  function LimparPesquisa() {
    Usuarios();
    let limpar = document.getElementById("limpar");

    limpar.style.display = "none";
  }

  let modal = document.getElementById("modalAdicionar");
  let span = document.getElementsByClassName("close")[0];

  function AdicionarUsuario() {
    let tituloHeader = document.getElementById("header-title-usuario");

    modal.style.display = "block";
    tituloHeader.innerHTML = `Adicionar novo usuário`;
  }

  span.onclick = function () {
    modal.style.display = "none";
  }

  window.onclick = function (event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }
</script>