<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | Máquinas</title>
    <!-- <script src="../js/sessao.js"></script> -->
    <link rel="shortcut icon" href="img/circle-MindCore-azul.png" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style-responsivo.css">
</head>

<body onload="note(), validarSessao()">
    <div class="left-sidebar">
        <img class="imgLogo" src="img/logo-MindCore.png" alt="logo">

        <div class="menu">
            <div class="bloco 1">
              <a href="dash.html">
                <img class="imgBloco" src="img/historia.png">
                <p>Dashboard</p>
              </a>
            </div>
      
            <div class="bloco 2 aqui">
              <a href="verificarNotebooks.html">
                <img class="imgBloco" src="img/computador.png">
                <p>Parque de Máquinas</p>
              </a>
            </div>
      
            <div class="bloco 3 ">
              <a href="users.html">
                <img class="imgBloco" src="img/adicionar-usuario.png">
                <p>Adicionar Usuário</p>
              </a>
            </div>
        
            <div class="bloco 4">
              <a href="">
                <img class="imgBloco" src="img/estoque.png">
                <p>Estoque</p>
              </a>
            </div>
          </div>

        <div class="logout" onclick="limparSessao()">
            <img src="img/sair.png">
        </div>
    </div>
    <div class="dados">
        <div class="perfil">
            <div class="turmas">
                <p>Turmas</p>
                <select name="turmas" id="turma">
                    <option value="adsA">ADS A</option>
                    <option value="adsB">ADS B</option>
                    <option value="adsC">ADS C</option>
                    <option value="sis">SIS</option>
                    <option value="CCO">CCO</option>
                </select>
            </div>

            <div class="usuario">
                <div class="texto">
                    <p class="nome" id="nomeUsuario">Olá, </p>
                    <p id="tipoUsuario">Técnico</p>
                </div>
                <img src="img/usuario.png">
            </div>
        </div>

        <div id="notebooks">
            <div class="pesquisar">
                <p>HostName:</p>
                <input id="Pesquisar">
                <button onclick="pesquisarNote()">Pesquisar</button>
            </div>
            <div class="header-tabela">
                <p class="id-campo">HostName</p>
                <p id="status_campo">Status <img src="img/ordenar-decrescente.png" id="img_ordenar"></p>
                <p id="ult_mod">Última modificação <img src="img/ordenar-decrescente.png" id="img_ordenar2"></p>
                <span></span>
            </div>
            <div id="repeticao">

            </div>
            <div id="myModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <span class="close">&times;</span>
                        <div id="header">
                            <h2 id="header-title"></h2>
                        </div>
                    </div>
                    <div class="modal-body">
                        <div class="dashs">
                            <div class="cpu">
                                <h3>CPU: I3 11500U</h3>
                                <!-- Gráfico -->
                                <canvas id="myChartCPU" style="display: block; box-sizing: border-box; height: 100px; width: 200px;"></canvas>
                                <div class="infos">
                                    <div class="info">
                                        <h5>Tempo de Atividade</h5>
                                <span>0:01:35:54</span>
                                    </div>
                                    <div class="info">
                                        <h5>Uso CPU%</h5>
                                <span>60%</span>
                                    </div>
                                    <div class="info">
                                        <h5>Temperatura</h5>
                                <span>55ºC</span>
                                    </div>
                                </div>
                            </div>
    
                            <div class="ram">
                                <h3>Memória Ram: 8GB</h3>
                                <div class="chart">
                                    <canvas id="myChartRAM" style="display: block; box-sizing: border-box; height: 100px; width: 150px;"></canvas>
                                    <canvas id="myChartRAM2" style="display: block; box-sizing: border-box; height: 30px; width: 30px;"></canvas>
                                </div>   
                            </div>

                        </div>

                        <div class="dashs">
                            <div class="rede">
                                <h3>Wifi</h3>
                                <h3>Nome da rede:</h3>
                                <span>Hl_Student</span>
                            </div>

                            <div class="disco">
                                <h3>Disco: 500GB</h3>
                                <canvas id="myChartDISCO" style="display: block; box-sizing: border-box; height: 100px; width: 150px;"></canvas>

                            </div>
                        </div>

                        

                       

                    </div>
                </div>

            </div>
        </div>

    </div>

</body>

</html>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const computadores = [
        {
            hostName: "adsA1",
            ultimaModificação: "10/03/2024",
            status: 0
        },
        {
            hostName: "adsA2",
            ultimaModificação: "10/03/2024",
            status: 1
        },
        {
            hostName: "adsA3",
            ultimaModificação: "10/03/2024",
            status: 0
        },
        {
            hostName: "adsA4",
            ultimaModificação: "10/03/2024",
            status: 0
        },
        {
            hostName: "adsA5",
            ultimaModificação: "10/03/2024",
            status: 0
        },
        {
            hostName: "adsA6",
            ultimaModificação: "10/03/2024",
            status: 1
        },
        {
            hostName: "adsA7",
            ultimaModificação: "10/03/2024",
            status: 1
        },
        {
            hostName: "adsA8",
            ultimaModificação: "10/03/2024",
            status: 0
        },
        {
            hostName: "adsA9",
            ultimaModificação: "10/03/2024",
            status: 0
        },
        {
            hostName: "adsA10",
            ultimaModificação: "10/03/2024",
            status: 0
        }
    ];



    function note() {

        for (let i = 0; i < computadores.length; i++) {
            repeticao.innerHTML += `
            <div id="campo" onclick="graficos('${computadores[i].hostName}')">
                <p>${computadores[i].hostName}</p>
                <div class="bolinha" id="bolinha${i}"></div>
                <p>${computadores[i].ultimaModificação}</p>
                <p id="editar">Editar</p>
            </div>`;

            
            if (computadores[i].status == 1) {
                const elemento = document.getElementById('bolinha' + i);
                elemento.setAttribute("style", "background-color: red;");
            }

            if (i >= 7) {
                repeticao.style.overflowY = "scroll";
                notebooks.style.overflow = "hidden";
            }
        }
    }


    let modal = document.getElementById("myModal");
    let span = document.getElementsByClassName("close")[0];

    function graficos(hostname) {
        let tituloHeader = document.getElementById("header-title");

        tituloHeader.innerHTML = "";
        modal.style.display = "block";
        tituloHeader.innerHTML += `HostName: ${hostname}`;

    
        for (let i = 0; i < computadores.length; i++){
            if (hostname == computadores[i].hostName){
                let statusComputador = computadores[i].status == 1 ? "red" : "green";
                
                tituloHeader.innerHTML += `<button class="alerta ${statusComputador}" id="alerta${i}"></button>`;
            }
        }

    }

    span.onclick = function () {
        modal.style.display = "none";
    }

    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

    function pesquisarNote() {
        let hostNamePesquisa = Pesquisar.value;

        for (let i = 0; i <= computadores.length; i++) {
            if (hostNamePesquisa == computadores[i].hostName) {
                graficos(hostNamePesquisa);
            }
        }

    }

    let statusCampo = document.getElementById("status_campo");
    let modificacao = document.getElementById("ult_mod");

    statusCampo.onclick = function () {
        img_ordenar.innerHTML = "img/ordenar-decrescente.png";
    }
</script>
<script>
    //CHART CPU------------------------------------------------------
const labelsCPU = ['60s', '50s', '40s', '30s', '20s', '10s', '0s'];    
const dataCPU = {
  labels: labelsCPU,
  datasets: [{
    label: 'Uso CPU %',
    data: [59, 80, 81, 56, 55, 40, 60, 0, 100],
    fill: false,
    borderColor: '#9340FF',
    tension: 0.1
  }]
};
const configCPU = {
    type: 'line',
    data: dataCPU,
  };

    const myChartCPU = new Chart(
        document.getElementById('myChartCPU'),
        configCPU
    );

    // CHART RAM-----------------------------------------------------

const labelsRAM = ['60s', '50s', '40s', '30s', '20s', '10s', '0s'];    
const dataRAM = {
  labels: labelsRAM,
  datasets: [{
    label: 'Uso RAM %',
    data: [59, 80, 81, 56, 55, 40, 60, 0, 100],
    fill: false,
    borderColor: '#9340FF',
    tension: 0.1
  }]
};
const configRAM = {
    type: 'line',
    data: dataRAM,
  };

    const myChartRAM = new Chart(
        document.getElementById('myChartRAM'),
        configRAM
    );

    const dataRAM2 = {
        labels: [
          'Em uso',
          'Disponível'
        ],
        datasets: [{
          label: 'MB',
          data: [3466, 4534],
          backgroundColor: [
            '#9340FF',
            '#023971'
          ],
          hoverOffset: 4
        }]
      };
      const configRAM2 = {
        type: 'pie',
        data: dataRAM2,
      };
    
        const myChartRAM2 = new Chart(
            document.getElementById('myChartRAM2'),
            configRAM2
        );
        // DISCO-------------------------------------------------------
        const dataDISCO = {
            labels: [
              'Em uso',
              'Disponível'
            ],
            datasets: [{
              label: 'GB',
              data: [320, 180],
              backgroundColor: [
                '#9340FF',
                '#023971'
              ],
              hoverOffset: 4
            }]
          };
          const configDISCO = {
            type: 'pie',
            data: dataDISCO,
          };
        
            const myChartDISCO = new Chart(
                document.getElementById('myChartDISCO'),
                configDISCO
            );

    
</script>